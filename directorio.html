<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Directorio | Plaza Universidad</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        carso: {
                            brand: 'rgb(219 36 44)',
                            black: '#000000',
                            dark: '#111111',
                            gray: '#F8F9FA'
                        }
                    },
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        .hide-scroll::-webkit-scrollbar {
            display: none;
        }

        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="bg-gray-50 text-carso-black">

    <!-- HEADER -->
    <header class="fixed w-full top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-100 h-20">
        <div class="container mx-auto px-6 h-full flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-3 group z-50 relative h-full">
                <img src="logos/logo.webp" alt="Plaza Universidad"
                    class="h-10 md:h-14 w-auto object-contain drop-shadow-sm group-hover:scale-105 transition-transform duration-300">
                <div class="flex flex-col justify-center">
                    <span
                        class="text-[10px] font-black uppercase tracking-[0.2em] text-carso-brand leading-none mb-0.5">PLAZA</span>
                    <span
                        class="text-lg font-black uppercase leading-none text-carso-black tracking-tighter">UNIVERSIDAD</span>
                </div>
            </a>

            <nav class="hidden lg:flex items-center gap-8 h-full">
                <a href="directorio.html"
                    class="text-sm font-extrabold uppercase text-carso-brand transition-colors">Directorio</a>
                <a href="eventos.html"
                    class="text-sm font-extrabold uppercase hover:text-carso-brand transition-colors">Eventos</a>
                <a href="promociones.html"
                    class="text-sm font-extrabold uppercase hover:text-carso-brand transition-colors">Promociones</a>
                <a href="contacto.html"
                    class="text-sm font-extrabold uppercase hover:text-carso-brand transition-colors">Contacto</a>
            </nav>

            <button class="lg:hidden text-carso-black p-2" onclick="toggleMobileMenu()">
                <div class="space-y-1.5 w-8">
                    <span class="block w-full h-0.5 bg-black transition-all duration-300"></span>
                    <span class="block w-full h-0.5 bg-black transition-all duration-300"></span>
                    <span class="block w-full h-0.5 bg-black transition-all duration-300"></span>
                </div>
            </button>
        </div>
    </header>

    <!-- MENÚ MÓVIL (Overlay) -->
    <div id="mobile-menu" class="fixed inset-0 bg-white z-40 hidden opacity-0 transition-opacity duration-300">
        <div class="flex flex-col items-center justify-center w-full h-full p-6">
            <nav class="flex flex-col gap-8 text-center z-10 w-full">
                <a href="index.html"
                    class="text-4xl font-black uppercase text-carso-black hover:text-carso-brand transition-colors">Inicio</a>
                <a href="directorio.html"
                    class="text-4xl font-black uppercase text-carso-brand transition-colors">Directorio</a>
                <a href="eventos.html"
                    class="text-4xl font-black uppercase text-carso-black hover:text-carso-brand transition-colors">Eventos</a>
                <a href="promociones.html"
                    class="text-4xl font-black uppercase text-carso-black hover:text-carso-brand transition-colors">Promociones</a>
                <a href="contacto.html"
                    class="text-xl font-bold uppercase text-white bg-carso-brand py-4 px-8 rounded-full shadow-xl mx-auto mt-4">Contacto</a>
            </nav>
        </div>
    </div>

    <!-- HERO -->
    <div class="relative bg-white h-[40vh] min-h-[300px] flex items-center justify-center overflow-hidden mt-20">
        <div
            class="absolute inset-0 z-0 bg-[url('https://www.formato7.com/wp-content/uploads/2020/11/Plaza-americas-Xalapa.jpg')] bg-cover bg-center opacity-50 grayscale">
        </div>
        <div class="relative z-10 text-center px-6">
            <h1 class="text-5xl md:text-7xl font-black text-carso-black uppercase tracking-tighter mb-4 italic">
                Directorio <span class="text-carso-brand">Oficial</span>
            </h1>
            <p class="text-xl text-gray-500 font-bold uppercase tracking-widest max-w-2xl mx-auto">
                Encuentra tus marcas favoritas
            </p>
        </div>
    </div>

    <!-- CONTENT -->
    <div class="container mx-auto px-6 py-24 -mt-20 relative z-20">
        <!-- Search & Filter -->
        <div class="bg-white rounded-3xl shadow-2xl p-8 mb-16">
            <div class="flex flex-col md:flex-row gap-6 items-center">
                <div class="w-full md:w-2/3 relative">
                    <i
                        class="fas fa-search absolute left-6 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl"></i>
                    <input type="text" id="store-search" placeholder="Buscar tienda o restaurante..."
                        class="w-full bg-gray-50 border border-gray-200 rounded-full py-5 pl-16 pr-8 font-bold text-gray-700 focus:outline-none focus:border-carso-brand focus:ring-1 focus:ring-carso-brand transition-all text-lg">
                </div>
                <div class="w-full md:w-1/3">
                    <select id="store-filter"
                        class="w-full bg-carso-brand text-white border-0 rounded-full py-5 px-8 font-black uppercase tracking-widest focus:outline-none hover:bg-carso-dark transition-all cursor-pointer appearance-none">
                        <option value="Todas">Todas las Categorías</option>
                        <option value="Departamental">Departamental</option>
                        <option value="Moda">Moda</option>
                        <option value="Cafetería">Cafetería</option>
                        <option value="Tecnología">Tecnología</option>
                        <option value="Alimentos">Alimentos</option>
                        <option value="Entretenimiento">Entretenimiento</option>
                        <option value="Servicios">Servicios</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Stores Grid -->
        <div id="stores-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
            <!-- JS will populate this -->
        </div>

        <div id="no-results" class="hidden text-center py-20">
            <h3 class="text-3xl font-black text-gray-300 uppercase">Sin Resultados</h3>
        </div>
    </div>

    <!-- Modal Template -->
    <div id="dir-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity" onclick="closeDirectoryModal()">
        </div>
        <div class="relative w-full h-full flex items-center justify-center p-4">
            <div class="bg-white w-full max-w-4xl rounded-3xl overflow-hidden shadow-2xl transform scale-95 opacity-0 transition-all duration-300 relative"
                id="dir-modal-content">

                <!-- Close Button (FIXED X) -->
                <button onclick="closeDirectoryModal()"
                    class="absolute top-6 right-6 z-50 w-12 h-12 bg-gray-100 hover:bg-carso-brand text-gray-400 hover:text-white rounded-full flex items-center justify-center transition-all shadow-lg hover:shadow-xl hover:scale-110">
                    <i class="fas fa-times text-xl"></i>
                </button>

                <div class="grid grid-cols-1 md:grid-cols-2 h-full">
                    <div class="h-64 md:h-[500px] bg-gray-50 relative flex items-center justify-center p-12">
                        <div class="absolute inset-0 bg-carso-brand/5"></div>
                        <img id="modal-img" src=""
                            class="w-full h-full object-contain drop-shadow-xl mix-blend-multiply relative z-10 transition-transform duration-500 hover:scale-105">
                    </div>
                    <div class="p-10 flex flex-col justify-center bg-white relative">
                        <h2 id="modal-title"
                            class="text-4xl md:text-5xl font-black text-carso-black uppercase tracking-tighter mb-2 leading-none">
                        </h2>
                        <span id="modal-cat"
                            class="text-carso-brand font-bold uppercase tracking-widest text-xs mb-8 block"></span>
                        <p id="modal-desc" class="text-gray-600 font-medium text-lg leading-relaxed mb-8"></p>
                        <div class="space-y-4 border-t border-gray-100 pt-8">
                            <div class="flex items-center gap-4 text-gray-500">
                                <div
                                    class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-carso-brand">
                                    <i class="fas fa-map-marker-alt"></i></div>
                                <div><span
                                        class="block text-[10px] font-black uppercase tracking-widest text-gray-400">Ubicación</span><span
                                        id="modal-loc" class="font-bold text-carso-black"></span></div>
                            </div>
                            <div class="flex items-center gap-4 text-gray-500">
                                <div
                                    class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-carso-brand">
                                    <i class="far fa-clock"></i></div>
                                <div><span
                                        class="block text-[10px] font-black uppercase tracking-widest text-gray-400">Horario</span><span
                                        id="modal-time" class="font-bold text-carso-black"></span></div>
                            </div>
                        </div>
                        <a id="modal-map-link" href="#"
                            class="mt-8 bg-carso-black text-white font-black uppercase tracking-widest py-4 px-8 rounded-xl text-center hover:bg-carso-brand transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-1 block">Ver
                            en Mapa</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="bg-black text-white pt-24 pb-12">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16 border-b border-gray-800 pb-12">
                <div class="col-span-1 lg:col-span-2">
                    <img src="logos/logo.webp" alt="Plaza Universidad" class="h-12 w-auto mb-4 object-contain">
                    <p class="mt-6 text-gray-500 text-sm font-medium leading-relaxed max-w-sm uppercase">Creando
                        espacios que transforman ciudades.</p>
                </div>
                <div>
                    <h4 class="font-black text-carso-brand mb-6 uppercase tracking-wider text-xs">Directo</h4>
                    <ul class="space-y-4 text-sm text-gray-500 font-bold uppercase tracking-widest">
                        <li><a href="index.html" class="hover:text-white transition-colors">Inicio</a></li>
                        <li><a href="directorio.html" class="hover:text-white transition-colors">Directorio</a></li>
                        <li><a href="eventos.html" class="hover:text-white transition-colors">Eventos</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- MOBILE BAR -->
    <div class="fixed bottom-0 w-full bg-white border-t border-gray-200 z-30 md:hidden pb-safe">
        <div class="grid grid-cols-4 h-16">
            <a href="index.html"
                class="flex flex-col items-center justify-center text-gray-400 hover:text-carso-brand"><i
                    class="fas fa-home text-lg mb-1"></i><span
                    class="text-[9px] font-black uppercase tracking-tighter">Inicio</span></a>
            <a href="directorio.html" class="flex flex-col items-center justify-center text-carso-brand"><i
                    class="fas fa-store text-lg mb-1"></i><span
                    class="text-[9px] font-black uppercase tracking-tighter">Tiendas</span></a>
            <a href="eventos.html"
                class="flex flex-col items-center justify-center text-gray-400 hover:text-carso-brand"><i
                    class="fas fa-calendar-alt text-lg mb-1"></i><span
                    class="text-[9px] font-black uppercase tracking-tighter">Eventos</span></a>
            <button onclick="toggleMobileMenu()"
                class="flex flex-col items-center justify-center text-gray-400 hover:text-carso-brand"><i
                    class="fas fa-bars text-lg mb-1"></i><span
                    class="text-[9px] font-black uppercase tracking-tighter">Menú</span></button>
        </div>
    </div>

    <script>
        // GENERATE 50 MOCK STORES USING LOCAL IMAGES MAPPED FROM FOLDER
        const categories = ['Moda', 'Tecnología', 'Alimentos', 'Entretenimiento', 'Servicios', 'Departamental', 'Cafetería'];
        const floors = ['PB', 'PA'];

        // Manual mapping or generated list. Since we have local_1.jpg to local_50.jpg
        // We will assign names sequentially for the demo as requested ("todas las imagenes con su nombre de local").
        // Since I don't have the real names for each specific "AAA...jpg" file, I will use generic meaningful names mixed with real ones.
        const storeNames = [
            'Sears', 'Liverpool', 'Zara', 'H&M', 'Cinépolis', 'Starbucks', 'Sanborns', 'Palacio de Hierro',
            'Bershka', 'Pull&Bear', 'Massimo Dutti', 'Oysho', 'Stradivarius', 'Lefties', 'Uterqüe',
            'Mango', 'Springfield', 'Women Secret', 'Cortefiel', 'Pedro del Hierro', 'Sfera',
            'Mixup', 'iShop', 'MacStore', 'Samsung', 'Huawei', 'Xiaomi', 'Sony', 'Bose',
            'GamePlanet', 'Gamers', 'Recórcholis', 'Italiannis', 'Chilis', 'PF Changs',
            'Cheesecake Factory', 'California Pizza Kitchen', 'Vips', 'Toks', 'Bisquets Obregón',
            'Casa de Toño', 'Sushi Itto', 'Moshi Moshi', 'Nutrisa', 'Santa Clara', 'Moyo',
            'Krispy Kreme', 'Cinnabon', 'Domino\'s', 'Burger King'
        ];

        const stores = [];

        // We have 50 images: local_1.jpg to local_50.jpg
        for (let i = 1; i <= 50; i++) {
            // Assign name from list or fallback
            // Note: The user said "menos las que dicen segundo piso". 
            // The file list I saw (AAA...) didn't have such names, so I assume all copied files are valid.
            stores.push({
                id: i,
                name: storeNames[i - 1] || `Local ${i}`,
                cat: categories[i % categories.length],
                floor: floors[i % floors.length],
                img: `images/locales/local_${i}.jpg`,
                desc: 'Disfruta de la mejor experiencia de compra con los productos más exclusivos y las últimas tendencias.',
                hue: i % 3 === 0 ? 'bg-carso-brand' : (i % 3 === 1 ? 'bg-black' : 'bg-gray-800'),
                time: '11:00 - 21:00'
            });
        }

        function renderStores(data) {
            const grid = document.getElementById('stores-grid');
            if (data.length === 0) {
                document.getElementById('no-results').classList.remove('hidden');
                grid.innerHTML = '';
                return;
            }
            document.getElementById('no-results').classList.add('hidden');

            grid.innerHTML = data.map(store => `
                <div onclick="openDirectoryModal('${store.id}', '${store.name}', '${store.cat}', '${store.img}', '${store.desc}', 'Planta ${store.floor}', '${store.time}')" 
                     class="bg-white rounded-2xl p-6 flex flex-col items-center justify-center gap-4 h-64 hover:-translate-y-2 transition-all cursor-pointer shadow-lg hover:shadow-2xl group relative overflow-hidden border border-gray-100">
                    
                    <div class="absolute inset-0 ${store.hue} transform translate-y-full group-hover:translate-y-0 transition-transform duration-500 ease-out z-0"></div>
                    
                    <div class="z-10 bg-gray-50 group-hover:bg-white rounded-full w-24 h-24 flex items-center justify-center p-2 shadow-inner transition-colors duration-500 overflow-hidden">
                        <img src="${store.img}" class="w-full h-full object-contain mix-blend-multiply">
                    </div>
                    
                    <div class="text-center z-10 transition-colors duration-300">
                        <h3 class="text-lg font-black text-carso-black uppercase group-hover:text-white mb-1 leading-none tracking-tight line-clamp-1">${store.name}</h3>
                        <span class="text-[9px] font-bold text-gray-400 uppercase tracking-widest group-hover:text-white/80">${store.cat}</span>
                    </div>
                    
                    <div class="absolute top-3 right-3 z-10">
                        <span class="bg-gray-100 text-carso-black text-[9px] font-black px-2 py-1 rounded shadow-sm group-hover:bg-white/20 group-hover:text-white transition-colors">${store.floor}</span>
                    </div>
                </div>
            `).join('');
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderStores(stores);

            document.getElementById('store-search').addEventListener('input', (e) => {
                const val = e.target.value.toLowerCase();
                const filtered = stores.filter(s => s.name.toLowerCase().includes(val));
                renderStores(filtered);
            });

            document.getElementById('store-filter').addEventListener('change', (e) => {
                const val = e.target.value;
                if (val === 'Todas') renderStores(stores);
                else {
                    const filtered = stores.filter(s => s.cat === val);
                    renderStores(filtered);
                }
            });
        });

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle("hidden");
            setTimeout(() => menu.classList.toggle("opacity-0"), 10);
        }

        function openDirectoryModal(id, title, cat, img, desc, loc, time) {
            const modal = document.getElementById('dir-modal');
            const content = document.getElementById('dir-modal-content');

            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-cat').innerText = cat;
            document.getElementById('modal-img').src = img;
            document.getElementById('modal-desc').innerText = desc;
            document.getElementById('modal-loc').innerText = loc;
            document.getElementById('modal-time').innerText = time;

            // LINK TO MAP WITH ID (Backend Logic: Directs to mapa.php with local ID parameter)
            document.getElementById('modal-map-link').href = `mapa.html?local=${id}`;

            modal.classList.remove('hidden');
            setTimeout(() => {
                content.classList.remove('scale-95', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeDirectoryModal() {
            const modal = document.getElementById('dir-modal');
            const content = document.getElementById('dir-modal-content');
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }
    </script>
</body>

</html>